---
import type { Lang } from '../i18n';
import { languages } from '../i18n';

interface Props {
  lang: Lang;
  t: any;
}

const { lang, t } = Astro.props;
const base = import.meta.env.BASE_URL;

// Get current path after base/nora/{lang}/ to build language switch links
const pathname = Astro.url.pathname;
const pathAfterLang = pathname.replace(new RegExp(`^${base}/nora/[a-z]{2}/?`), '');
---

<footer class="footer nora-footer" id="footer">
  <div class="nora-footer-container">
    <!-- Stats Section -->
    <div class="nora-footer-stats">
      <h2 class="nora-footer-heading">{t.footer.heading}</h2>
      <div class="nora-footer-stats-grid">
        <div class="nora-footer-stat">
          <div class="nora-footer-stat-value">{t.footer.stats.timeSaved.value}</div>
          <div class="nora-footer-stat-label">{t.footer.stats.timeSaved.label}</div>
        </div>
        <div class="nora-footer-stat">
          <div class="nora-footer-stat-value">{t.footer.stats.filesAdded.value}</div>
          <div class="nora-footer-stat-label">{t.footer.stats.filesAdded.label}</div>
        </div>
        <div class="nora-footer-stat">
          <div class="nora-footer-stat-value">{t.footer.stats.noteQuality.value}</div>
          <div class="nora-footer-stat-label">{t.footer.stats.noteQuality.label}</div>
        </div>
      </div>
    </div>

    <!-- Divider -->
    <div class="nora-footer-divider"></div>

    <!-- Logo & Links -->
    <div class="nora-footer-bottom">
      <a href={`${base}/nora/${lang}/`} class="nora-footer-logo-link">
        <img src={`${base}/images/nordhealth-nora-white.svg`} alt="Nordhealth Nora" class="nora-footer-logo">
      </a>
      <div class="nora-footer-links">
        <span class="nora-footer-copyright">{t.footer.copyright}</span>
        <a href={`${base}/nora/${lang}/privacy`} class="nora-footer-link">{t.footer.privacy}</a>
        <a href={`${base}/nora/${lang}/privacy`} class="nora-footer-link">{t.footer.terms}</a>
        <span class="nora-footer-lang-switcher">
          {languages.map((l, i) => (
            <>
              {i > 0 && <span class="lang-separator">|</span>}
              {l === lang ? (
                <span class="lang-current">{l.toUpperCase()}</span>
              ) : (
                <a href={`${base}/nora/${l}/${pathAfterLang}`} class="lang-link">{l.toUpperCase()}</a>
              )}
            </>
          ))}
        </span>
      </div>
    </div>
  </div>
</footer>
