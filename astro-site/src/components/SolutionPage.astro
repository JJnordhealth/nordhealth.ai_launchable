---
/**
 * SolutionPage Component
 * Reusable template for all specialty solution pages.
 * Each specialty page passes its key (e.g., "speechTherapists") and
 * the component reads the corresponding translations from t.solutions[specialty].
 */

interface Props {
  specialty: 'speechTherapists' | 'generalPractitioners' | 'psychologists' | 'physiotherapists' | 'allSpecialties';
  lang: string;
  t: any;
}

const { specialty, lang, t } = Astro.props;
const base = import.meta.env.BASE_URL.replace(/\/$/, '');

// Get specialty-specific translations
const content = t.solutions[specialty];
const trustBadges = t.solutions.trustBadges;

// Map specialty keys to image slug names
const specialtyImageMap: Record<string, string> = {
  speechTherapists: 'speech-therapists',
  generalPractitioners: 'general-practitioners',
  psychologists: 'psychologists',
  physiotherapists: 'physiotherapists',
  allSpecialties: 'all-specialties'
};
const heroImage = `${base}/images/hero_${specialtyImageMap[specialty]}_${lang}.png`;

// Feature card SVG icon (checkmark circle)
const featureIcon = `<svg viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg">
  <path d="M10 0C15.51 0 20 4.49 20 10C20 15.51 15.51 20 10 20C4.49 20 0 15.51 0 10C0 4.49 4.49 0 10 0ZM10 2C5.59 2 2 5.59 2 10C2 14.41 5.59 18 10 18C14.41 18 18 14.41 18 10C18 5.59 14.41 2 10 2ZM14.79 7.71L9.47 13.66C9.29 13.87 9.03 13.99 8.75 13.99H8.72C8.46 13.99 8.2 13.89 8.01 13.7L5.15 10.84L6.56 9.43L8.68 11.55L13.29 6.38H13.3L14.79 7.71Z" fill="white"/>
</svg>`;

// Split features into rows of 3 for grid layout
const featureItems = content.features?.items || [];
const featureRows: typeof featureItems[] = [];
for (let i = 0; i < featureItems.length; i += 3) {
  featureRows.push(featureItems.slice(i, i + 3));
}
---

<!-- Hero Section -->
<section class="solutions-hero section">
  <div class="solutions-hero-container">
    <div class="solutions-hero-content fade-in-up" data-animation-delay="0.1s">
      <h1 class="solutions-hero-title">
        {content.hero.title}
      </h1>
      <p class="solutions-hero-description">
        {content.hero.description}
      </p>
    </div>
    <div class="solutions-hero-image fade-in-up" data-animation-delay="0.2s">
      <img
        src={heroImage}
        alt={content.hero.title}
        fetchpriority="high"
      />
    </div>
  </div>
</section>

<!-- How Nora Supports You Section -->
<section class="solutions-support section">
  <!-- Top content: heading + interface image -->
  <div class="solutions-support-container">
    <div class="solutions-support-top fade-in-up" data-animation-delay="0.1s">
      <div class="solutions-support-header">
        <h2 class="solutions-support-heading">
          {content.features.heading}
        </h2>
        {content.hero.extendedDescription && (
          <p class="solutions-support-description">
            {content.hero.extendedDescription}
          </p>
        )}
      </div>
      <div class="solutions-support-image">
        <img
          src={`${base}/images/how_nora_supports_you.png`}
          alt="Nordhealth Nora clinical documentation interface"
          loading="lazy"
        />
      </div>
    </div>
  </div>

  <!-- Feature Cards -->
  <div class="solutions-support-cards-section">
    {featureRows.map((row, rowIndex) => (
      <div class="solutions-support-cards-wrapper">
        <div class="solutions-support-cards fade-in-up" data-animation-delay={`${0.2 + rowIndex * 0.1}s`}>
          {row.map((feature) => (
            <div class="solutions-support-card">
              <div class="solutions-support-card-icon" set:html={featureIcon}></div>
              <div class="solutions-support-card-content">
                <h3>{feature.title}</h3>
                <p>{feature.description}</p>
              </div>
            </div>
          ))}
          {/* Add hidden placeholder cards to maintain grid alignment if row has < 3 items */}
          {row.length < 3 && Array.from({ length: 3 - row.length }).map(() => (
            <div class="solutions-support-card solutions-support-card-hidden" aria-hidden="true"></div>
          ))}
        </div>
      </div>
    ))}
  </div>
</section>

<!-- Trust Section -->
<section class="solutions-trust section">
  <div class="solutions-trust-container">
    <div class="solutions-trust-content fade-in-up" data-animation-delay="0.1s">
      <h2 class="solutions-trust-title">{content.trust.title}</h2>
      <p class="solutions-trust-description">{content.trust.description}</p>
    </div>

    <div class="solutions-trust-badges fade-in-up" data-animation-delay="0.2s">
      <div class="solutions-trust-badge">
        <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
          <path d="M12 0C18.624 0 24 5.376 24 12C24 18.624 18.624 24 12 24C5.376 24 0 18.624 0 12C0 5.376 5.376 0 12 0ZM8.88 16.8C9.5 19.66 10.66 21.59 11.99 21.6C13.32 21.59 14.49 19.66 15.11 16.8H8.88ZM3.7 16.8C4.61 18.37 5.95 19.67 7.57 20.51C7.07 19.43 6.7 18.17 6.43 16.8H3.7ZM17.56 16.8C17.3 18.17 16.92 19.43 16.42 20.51C18.04 19.67 19.38 18.37 20.29 16.8H17.56ZM2.71 9.6C2.52 10.37 2.4 11.17 2.4 12C2.4 12.83 2.51 13.63 2.71 14.4H6.1C6.02 13.61 5.99 12.8 5.99 12C5.99 11.2 6.02 10.39 6.1 9.6H2.71ZM8.52 9.6C8.45 10.37 8.4 11.17 8.4 12C8.4 12.83 8.45 13.63 8.52 14.4H15.48C15.55 13.63 15.6 12.83 15.6 12C15.6 11.17 15.55 10.37 15.48 9.6H8.52ZM17.9 9.6C17.98 10.39 18.01 11.2 18.01 12C18.01 12.8 17.98 13.61 17.9 14.4H21.29C21.48 13.63 21.6 12.83 21.6 12C21.6 11.17 21.49 10.37 21.29 9.6H17.9ZM7.57 3.49C5.95 4.33 4.61 5.63 3.7 7.2H6.43C6.68 5.83 7.07 4.57 7.57 3.49ZM12 2.4C10.67 2.4 9.5 4.33 8.88 7.2H15.12C14.5 4.33 13.33 2.4 12 2.4ZM16.43 3.49C16.93 4.57 17.3 5.83 17.57 7.2H20.3C19.39 5.63 18.05 4.33 16.43 3.49Z" fill="currentColor"/>
        </svg>
        <span>{trustBadges.euHosted}</span>
      </div>

      <div class="solutions-trust-badge">
        <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
          <path d="M11.24 0.19C11.72 0.01 12.26 0.01 12.76 0.19L21.29 3.4C22.2 3.73 22.8 4.63 22.8 5.65V10.8C22.8 17.47 18.65 22.64 12.24 23.98C12.17 24 12.08 24 12 24C11.92 24 11.84 23.99 11.76 23.98C5.34 22.64 1.2 17.47 1.2 10.8V5.66C1.2 4.64 1.81 3.73 2.71 3.4L11.24 0.19ZM3.55 5.64L3.6 10.79C3.6 16.2 6.89 20.4 12 21.56C17.11 20.39 20.4 16.19 20.4 10.79V5.65L12 2.47L3.55 5.64ZM12 7.19C13.98 7.19 15.6 8.81 15.6 10.79C15.6 12.36 14.59 13.68 13.2 14.17V16.79H10.8V14.17C9.41 13.67 8.4 12.35 8.4 10.79C8.4 8.81 10.02 7.19 12 7.19ZM12 9.59C11.34 9.59 10.8 10.13 10.8 10.79C10.8 11.45 11.34 11.99 12 11.99C12.66 11.99 13.2 11.45 13.2 10.79C13.2 10.13 12.66 9.59 12 9.59Z" fill="currentColor"/>
        </svg>
        <span>{trustBadges.gdpr}</span>
      </div>

      <div class="solutions-trust-badge">
        <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
          <path d="M10.8 2.4C11.46 2.4 12 2.94 12 3.6V20.4C12 21.06 11.46 21.6 10.8 21.6H9.92C9.64 21.6 9.35 21.49 9.13 21.3L4.02 16.8H2.4C1.08 16.8 0 15.72 0 14.4V9.6C0 8.28 1.08 7.2 2.4 7.2H4.02L9.13 2.7C9.35 2.51 9.64 2.4 9.92 2.4H10.8ZM5.6 9C5.17 9.38 4.61 9.6 4.02 9.6H2.4V14.4H4.02C4.61 14.4 5.16 14.62 5.6 15L9.6 18.52V5.48L5.6 9ZM23.64 9.25L20.89 12L23.64 14.75L21.95 16.44L19.2 13.69L16.45 16.44L14.76 14.75L17.51 12L14.76 9.25L16.45 7.56L19.2 10.31L21.95 7.56L23.64 9.25Z" fill="currentColor"/>
        </svg>
        <span>{trustBadges.noAudio}</span>
      </div>

      <div class="solutions-trust-badge">
        <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
          <path d="M9.6 16.8C5.63 16.8 2.4 20.03 2.4 24H0C0 18.71 4.31 14.4 9.6 14.4V16.8ZM23.09 14.6L19.69 18L23.09 21.4L21.4 23.09L18 19.69L14.6 23.09L12.91 21.4L16.31 18L12.91 14.6L14.6 12.91L18 16.31L21.4 12.91L23.09 14.6ZM9.6 0C12.91 0 15.6 2.69 15.6 6C15.6 9.31 12.91 12 9.6 12C6.29 12 3.6 9.31 3.6 6C3.6 2.69 6.29 0 9.6 0ZM9.6 2.4C7.62 2.4 6 4.02 6 6C6 7.98 7.62 9.6 9.6 9.6C11.58 9.6 13.2 7.98 13.2 6C13.2 4.02 11.58 2.4 9.6 2.4Z" fill="currentColor"/>
        </svg>
        <span>{trustBadges.noTraining}</span>
      </div>

      <div class="solutions-trust-badge">
        <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
          <path d="M3.6 0V2.4H2.4V7.2C2.4 9.18 4.02 10.8 6 10.8C7.98 10.8 9.6 9.18 9.6 7.2V2.4H8.4V0H9.6C10.92 0 12 1.08 12 2.4V7.2C12 10.1 9.94 12.53 7.2 13.08V16.8C7.2 19.45 9.35 21.6 12 21.6C14.65 21.6 16.8 19.45 16.8 16.8V10.01C15.07 9.48 13.8 7.9 13.8 6C13.8 3.68 15.68 1.8 18 1.8C20.32 1.8 22.2 3.68 22.2 6C22.2 7.9 20.93 9.49 19.2 10.01V16.8C19.2 20.77 15.97 24 12 24C8.03 24 4.8 20.77 4.8 16.8V13.08C2.06 12.52 0 10.09 0 7.2V2.4C0 1.08 1.08 0 2.4 0H3.6ZM18 4.2C17 4.2 16.2 5 16.2 6C16.2 7 17 7.8 18 7.8C19 7.8 19.8 7 19.8 6C19.8 5 19 4.2 18 4.2Z" fill="currentColor"/>
        </svg>
        <span>{trustBadges.clinicallyValidated}</span>
      </div>
    </div>
  </div>
</section>

<!-- CTA Banner -->
<section class="solutions-cta section">
  <div class="solutions-cta-container fade-in-up" data-animation-delay="0.1s">
    <h2 class="solutions-cta-title">{content.cta.button}</h2>
    <a href="https://system.nordhealth.ai/signup" target="_blank" class="btn-primary solutions-cta-button">
      {content.cta.button}
    </a>
  </div>
</section>

<!-- Testimonial Section -->
<section class="solutions-testimonial section">
  <div class="solutions-testimonial-container fade-in-up" data-animation-delay="0.1s">
    <h2 class="solutions-testimonial-title">{content.testimonial.title}</h2>
    <div class="solutions-testimonial-quotes">
      {content.testimonial.quotes?.map((quote: string) => (
        <blockquote class="solutions-testimonial-quote">
          {quote}
        </blockquote>
      ))}
    </div>
  </div>
</section>
